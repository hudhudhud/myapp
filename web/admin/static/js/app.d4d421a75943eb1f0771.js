webpackJsonp([1],{"3RrP":function(t,e){},"A+Vm":function(t,e,a){t.exports=a.p+"static/img/b.c81dcc6.jpg"},Aak6:function(t,e){},FNEL:function(t,e){},LqPF:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),i=a("aozt"),s=a.n(i),o={apiUrl:"https://iamabj.club/admin",uploadUrl:"https://iamabj.club",imgUrl:"https://iamabj.club/img"},l={get:function(t){return s.a.defaults.withCredentials=!0,s.a.get(o.apiUrl+t)},post:function(t,e){return s.a.post(o.apiUrl+t,e)}},r={data:function(){return{name:"",pwd:"",msg:"",err:"",day:0}},created:function(){var t=this;l.get("/login/api").then(function(e){e.data.user?(t.name=e.data.user.name,t.day=Math.ceil((Date.now()-Date.parse(e.data.user.regidate))/3600/24/1e3),t.isLogin=!0,t.$emit("login",{user:e.data.user}),console.log("logined")):console.log("no login")})},methods:{submit:function(){var t=this;l.post("/login/api",{name:this.name,pwd:this.pwd}).then(function(e){e.data&&(t.msg=e.data.msg,t.err=e.data.err,e.data.user&&e.data.user.regidate&&(t.day=Math.ceil((Date.now()-Date.parse(e.data.user.regidate))/3600/24/1e3)),t.err||t.$emit("login",{user:e.data.user})),console.log(e.data)}).catch(function(t){console.log(t)})},loginout:function(){var t=this;l.get("/login/out").then(function(e){t.msg=e.msg})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("div",[a("label",[t._v("用户名：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",name:"name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),a("div",[a("label",[t._v("密码：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"pwd"}],attrs:{type:"password",name:"pwd"},domProps:{value:t.pwd},on:{input:function(e){e.target.composing||(t.pwd=e.target.value)}}})]),t._v(" "),a("button",{on:{click:t.submit}},[t._v("登录")]),t._v(" "),t.msg?a("p",{staticClass:"msg"},[t._v(t._s(t.msg))]):t._e(),t._v(" "),t.err?a("p",{staticClass:"err"},[t._v(t._s(t.err))]):t._e()])},staticRenderFns:[]};var u={name:"app",components:{login:a("Z0/y")(r,c,!1,function(t){a("n5pn")},"data-v-5177cfca",null).exports},data:function(){return{isLogin:!1,user:{name:""},activeName:"首页",menu:[{name:"首页",path:"/"},{name:"管理",path:"/manage",child:[{name:"文章管理",path:"/manage/article"},{name:"用户管理",path:"/manage/user"}]},{name:"统计",path:"/statistics",child:[{name:"用户分析",path:"/statistics/user"}]}]}},methods:{login:function(t){this.isLogin=!0,this.user=t.user},loginOut:function(){var t=this;l.get("/login/api/out").then(function(e){t.msg=e.msg,t.isLogin=!1})},menuClick:function(t){this.activeName=t.target.innerText}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t.isLogin?n("section",{staticClass:"admin"},[n("div",{staticClass:"left"},[n("div",{staticClass:"head-img"},[n("img",{attrs:{src:a("A+Vm"),alt:""}}),t._v(" "),n("p",[t._v(t._s(t.user.name)+" 管理员")])]),t._v(" "),n("div",{staticClass:"router"},t._l(t.menu,function(e){return n("ul",[n("li",[n("router-link",{class:{active:e.name==t.activeName},attrs:{to:e.path},nativeOn:{click:function(e){return t.menuClick(e)}}},[t._v(t._s(e.name))])],1),t._v(" "),t._l(e.child,function(e){return n("li",[n("router-link",{class:{active:e.name==t.activeName},attrs:{to:e.path},nativeOn:{click:function(e){return t.menuClick(e)}}},[t._v(t._s(e.name))])],1)})],2)}))]),t._v(" "),n("div",{staticClass:"right"},[n("p",{staticClass:"header"},[t._v("管理后台"),n("span",{staticClass:"loginout",on:{click:t.loginOut}},[t._v("退出")])]),t._v(" "),n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view",{staticClass:"router-content"})],1)],1)]):n("login",{on:{login:t.login}})],1)},staticRenderFns:[]};var m=a("Z0/y")(u,d,!1,function(t){a("hquO"),a("LqPF")},"data-v-43e2f9c5",null).exports,v=a("/ocq"),p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content"},[e("transition",{attrs:{name:this.transitionName}},[e("router-view",{staticClass:"child-view"})],1)],1)},staticRenderFns:[]},f=a("Z0/y")({data:function(){return{transitionName:"out-in"}},watch:{$route:function(t,e){this.transitionName=t.name<e.name?"slide-right":"slide-left"}}},p,!1,null,null,null).exports,g={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content"},[e("transition",{attrs:{name:this.transitionName}},[e("router-view",{staticClass:"child-view"})],1)],1)},staticRenderFns:[]},h=a("Z0/y")({data:function(){return{transitionName:"out-in",path:this.$route.path}},watch:{$route:function(t,e){this.transitionName=t.name<e.name?"slide-right":"slide-left"}}},g,!1,null,null,null).exports,_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"foo"},[t._v("用户管理")]),t._v(" "),a("ul",t._l(t.list,function(e){return a("li",[a("span",[t._v(t._s(e))])])}))])},staticRenderFns:[]},C=a("Z0/y")({data:function(){return{list:["hd","dh","hx","lal"]}}},_,!1,null,null,null).exports,w=a("mvHQ"),y=a.n(w),b=(a("3RrP"),a("4U23")),I=a.n(b),k=a("BO1k"),x=a.n(k),L={props:["callback","uploadUrl"],data:function(){return{}},methods:{uploadImg:function(t){console.log(t.target.files);var e=new FormData,a=!0,n=!1,i=void 0;try{for(var s,o=x()(t.target.files);!(a=(s=o.next()).done);a=!0){var l=s.value;e.append("artifile",l,l.name)}}catch(t){n=!0,i=t}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}var r=new XMLHttpRequest;r.open("post",this.uploadUrl),r.responseType="json",r.send(e),r.onload=function(){200==r.status&&(console.log(r.response.files),this.callback(r.response.files))}.bind(this)}}},N={render:function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"a-upload",attrs:{href:"javascript:;"}},[e("input",{attrs:{type:"file",name:"coverImg",multiple:"multiple"},on:{change:this.uploadImg}}),this._v("选择图片\n")])},staticRenderFns:[]};var F=a("Z0/y")(L,N,!1,function(t){a("uMbG")},"data-v-32afdd9a",null).exports,T={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{foodTempHide:t.isHide},attrs:{id:"foodTemp"}},[a("div",{staticClass:"foodTemp"},[a("p",{staticClass:"top clearfix"},[a("span",[t._v("美食模板")]),t._v(" "),a("input",{attrs:{type:"button",value:"添加行"},on:{click:t.addLine}})]),t._v(" "),a("p",{staticClass:"food-title"},[t._v("食材")]),t._v(" "),a("ul",{staticClass:"lines"},t._l(t.foodLines,function(e,n){return a("li",[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.name,expression:"item.name",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入食材"},domProps:{value:e.name},on:{input:function(a){a.target.composing||t.$set(e,"name",a.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.quality,expression:"item.quality",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入用量"},domProps:{value:e.quality},on:{input:function(a){a.target.composing||t.$set(e,"quality",a.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),a("input",{staticClass:"del",attrs:{type:"button",value:"X"},on:{click:function(e){t.del(n)}}})])})),t._v(" "),a("input",{attrs:{type:"button",value:"保存"},on:{click:t.save}}),t._v(" "),a("input",{attrs:{type:"button",value:"取消"},on:{click:t.cancel}})])])},staticRenderFns:[]};var $=a("Z0/y")({props:["isHide","foodLines"],data:function(){return{}},methods:{addLine:function(){this.foodLines.push({name:"",quality:""})},cancel:function(){this.foodLines=[{name:"",quality:""}],this.$emit("cancelTemp")},save:function(){this.$emit("saveTemp",this.foodLines)},del:function(t){this.foodLines.splice(t,1)}}},T,!1,function(t){a("TxWz")},null,null).exports,U={name:"vue-html5-editor",showModuleName:!1,icons:{text:"fa fa-pencil",color:"fa fa-paint-brush",font:"fa fa-font",align:"fa fa-align-justify",list:"fa fa-list",link:"fa fa-chain",unlink:"fa fa-chain-broken",tabulation:"fa fa-table",image:"fa fa-file-image-o",hr:"fa fa-minus",eraser:"fa fa-eraser",undo:"fa-undo fa","full-screen":"fa fa-arrows-alt",info:"fa fa-info"},image:{sizeLimit:1048576,upload:{url:o.uploadUrl+"/upload",headers:{},params:{},fieldName:"artifile"},compress:!0,width:600,height:600,quality:80,uploadHandler:function(t){var e=JSON.parse(t).files[0].name;console.log(e);var a=o.imgUrl+"/upload/"+e;return console.log(a),a}},language:"zh-cn",i18n:{"zh-cn":{align:"对齐方式",image:"图片",list:"列表",link:"链接",unlink:"去除链接",table:"表格",font:"文字","full screen":"全屏",text:"排版",eraser:"格式清除",info:"关于",color:"颜色","please enter a url":"请输入地址","create link":"创建链接",bold:"加粗",italic:"倾斜",underline:"下划线","strike through":"删除线",subscript:"上标",superscript:"下标",heading:"标题","font name":"字体","font size":"文字大小","left justify":"左对齐","center justify":"居中","right justify":"右对齐","ordered list":"有序列表","unordered list":"无序列表","fore color":"前景色","background color":"背景色","row count":"行数","column count":"列数",save:"确定",upload:"上传",progress:"进度",unknown:"未知","please wait":"请稍等",error:"错误",abort:"中断",reset:"重置"}},hiddenModules:["full-screen","info"],visibleModules:["text","color","font","align","list","link","unlink","tabulation","image","hr","eraser","undo"],modules:{}},E={components:{editor1:new I.a(U),foodTemp:$,uploadImg:F},directives:{focus:{inserted:function(t){t.focus()}}},data:function(){return{uploadUrl:o.uploadUrl+"/upload",foodTempHide:!0,catg:"-1",title:"",desc:"",content:"",foodList:[{name:1,quality:2},{name:3,quality:4}],showFoodList:[],sliderImgs:[],coverImg:"",focusEditor:!1,tags:[],ifaddtag:!1,foodActive:-1,tagActive:-1,imgActive:-1}},computed:{},methods:{foodTemp:function(){this.foodTempHide=!1},cancelTemp:function(){this.foodTempHide=!0},saveTemp:function(t){this.foodTempHide=!0,this.foodList=t,this.showFoodList=this.foodList.map(function(t){return{name:t.name,quality:t.quality}})},showCoverImg:function(t){console.log(this.createImgUrl(t[0].name)),this.coverImg=this.createImgUrl(t[0].name)},showImgList:function(t){var e=this;t.forEach(function(t){return e.sliderImgs.push(e.createImgUrl(t.name))}),console.log(this.sliderImgs)},createImgUrl:function(t){return o.imgUrl+"/upload/"+t},editFocus:function(){this.focusEditor=!0,this.$refs.editor.focus()},editchange:function(t){this.content=t},addtag:function(){this.ifaddtag=!0},tagEnter:function(t){this.tagActive=t},tagLeave:function(){this.tagActive=-1},foodEnter:function(t){this.foodActive=t},foodLeave:function(t){this.foodActive=-1},sliderImgEnter:function(t){this.imgActive=t},sliderImgLeave:function(){this.imgActive=-1},tagblur:function(t){t.target&&t.target.value&&this.tags.push({val:t.target.value,sclose:!1}),this.ifaddtag=!1},deleteTag:function(t){this.tags.splice(t,1)},deleteFood:function(t){this.foodList.splice(t,1),this.showFoodList.splice(t,1)},deleteSliderImg:function(t){this.sliderImgs.splice(t,1)},save:function(){var t=this;l.post("/manage/article/api/add",{catg:this.catg,title:this.title,details:this.content,spec:y()(this.foodList),sliderImgs:y()(this.sliderImgs),coverImg:this.coverImg,tags:y()(this.tags)}).then(function(e){console.log(e),e.data.success&&(console.log("添加成功！"),t.$router.push({path:"/admin/manage"}))})},savesend:function(){var t=this;l.post("/manage/article/api/add",{catg:this.catg,title:this.title,details:this.content,spec:y()(this.foodList),sliderImgs:y()(this.sliderImgs),coverImg:this.coverImg,tags:y()(this.tags),publishDate:new Date}).then(function(e){console.log(e),e.data.success&&(console.log("添加成功！"),t.$router.push({path:"/manage"}))})}}},A={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",[t._v("文章管理 / 新建文章")]),t._v(" "),a("section",{staticClass:"main clearfix"},[a("div",{staticClass:"arti-div"},[a("editor1",{ref:"editor",attrs:{content:t.content,height:500,"z-index":5,"auto-height":!1},on:{change:t.editchange}}),t._v(" "),t.focusEditor?t._e():a("p",{staticClass:"article-detail",on:{click:t.editFocus}},[t._v("请在这里编辑文章")]),t._v(" "),a("div",{staticClass:"customer"},[a("div",{staticClass:"item title"},[a("span",{staticClass:"item-name"},[t._v("标题：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"title",attrs:{type:"text",placeholder:"请输入标题"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"item-name"},[t._v("封面：")]),t._v(" "),a("uploadImg",{attrs:{callback:t.showCoverImg,uploadUrl:t.uploadUrl}}),t._v(" "),t.coverImg?a("div",[a("span",{staticClass:"hasImg",style:{backgroundImage:"url("+t.coverImg+")"}})]):a("span",{staticClass:"noImg"})],1),t._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"item-name"},[t._v("分类：")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.catg,expression:"catg"}],staticClass:"catg",attrs:{name:"catg"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.catg=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"-1"}},[t._v("请选择")]),t._v(" "),a("option",{attrs:{value:"1"}},[t._v("美食")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("美妆")]),t._v(" "),a("option",{attrs:{value:"3"}},[t._v("服饰")]),t._v(" "),a("option",{attrs:{value:"4"}},[t._v("健身")]),t._v(" "),a("option",{attrs:{value:"5"}},[t._v("家居")])])]),t._v(" "),a("div",{staticClass:"item tags"},[a("span",{staticClass:"item-name"},[t._v("标签：")]),t._v(" "),t._l(t.tags,function(e,n){return a("span",{staticClass:"tag",on:{mouseenter:function(e){t.tagEnter(n)},mouseleave:t.tagLeave}},[t._v(t._s(e.val)+"\n\t\t\t\t\t\t\t"),a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.tagActive==n,expression:"tagActive==i"}],staticClass:"close",on:{click:function(e){t.deleteTag(n)}}},[t._v("X")])])],1)}),t._v(" "),t.ifaddtag?a("input",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"tagInput",attrs:{type:"text"},on:{blur:t.tagblur}}):t._e(),t._v(" "),a("span",{staticClass:"tag",attrs:{title:"添加标签"},on:{click:t.addtag}},[t._v("+")])],2),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.catg,expression:"catg==1"}],staticClass:"item food"},[a("span",{staticClass:"item-name"},[t._v("食材:")]),t._v(" "),a("input",{staticClass:"btn",attrs:{type:"button",value:"添加食材"},on:{click:t.foodTemp}}),t._v(" "),a("section",{staticClass:"food-temp"},t._l(t.showFoodList,function(e,n){return a("div",{staticClass:"clearfix",class:{oddFood:n%2==0,evenFood:n%2==1,choosedFood:t.foodActive==n},on:{mouseenter:function(e){t.foodEnter(n)},mouseleave:function(e){t.foodLeave()}}},[a("span",[t._v(t._s(e.name))]),t._v(" "),a("span",{attrs:{title:"删除"},on:{click:function(e){t.deleteFood(n)}}},[t._v("X")]),t._v(" "),a("span",[t._v(t._s(e.quality))])])}))]),t._v(" "),a("div",{staticClass:"item slider"},[a("span",{staticClass:"item-name"},[t._v("轮播图:")]),t._v(" "),a("uploadImg",{attrs:{callback:t.showImgList,uploadUrl:t.uploadUrl}}),t._v(" "),t.sliderImgs.length?a("div",t._l(t.sliderImgs,function(e,n){return a("span",{staticClass:"hasImg sliderImg",style:{backgroundImage:"url("+e+")"},on:{mouseenter:function(e){t.sliderImgEnter(n)},mouseleave:function(e){t.sliderImgLeave()}}},[a("transition",{attrs:{name:"fade"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.imgActive==n,expression:"imgActive==i"}],staticClass:"close slider",on:{click:function(e){t.deleteSliderImg(n)}}},[t._v("X")])])],1)})):a("span",{staticClass:"noImg"})],1)])],1),t._v(" "),a("div",{staticClass:"footer"},[a("input",{attrs:{type:"button",value:"保存"},on:{click:t.save}}),t._v(" "),a("input",{attrs:{type:"button",value:"预览"},on:{click:t.view}}),t._v(" "),a("input",{attrs:{type:"button",value:"保存并发送"},on:{click:t.savesend}})])]),t._v(" "),a("foodTemp",{attrs:{"is-hide":t.foodTempHide,"food-lines":t.foodList},on:{saveTemp:t.saveTemp,cancelTemp:t.cancelTemp}})],1)},staticRenderFns:[]};var q=a("Z0/y")(E,A,!1,function(t){a("WfUD")},"data-v-1fc45286",null).exports,R={data:function(){return{list:[]}},mounted:function(){var t=this;l.get("/manage/article/api").then(function(e){console.log(e),t.list=e.data})}},H={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("p",[t._v("文章管理")]),t._v(" "),a("router-link",{attrs:{to:"/manage/article/add"}},[t._v("新建文章")]),t._v(" "),a("ul",{staticClass:"articles"},t._l(t.list,function(e){return a("li",{staticClass:"article"},[a("p",[t._v(t._s(e.title))]),t._v(" "),a("img",{staticStyle:{width:"100%",height:"70%"},attrs:{src:e.coverImg,alt:""}}),t._v(" "),a("p",[t._v("更新于 "+t._s(e.modifyDate?e.modifyDate:e.createDate))])])}))],1)},staticRenderFns:[]};var D=a("Z0/y")(R,H,!1,function(t){a("Aak6")},null,null).exports,j={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"foo"},[t._v("用户分析")]),t._v(" "),a("ul",t._l(t.list,function(e){return a("li",[a("span",[t._v(t._s(e))])])}))])},staticRenderFns:[]},Z=a("Z0/y")({data:function(){return{list:["1","2","3","4"]}}},j,!1,null,null,null).exports,P={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("section",{staticClass:"user-count"},[a("p",[t._v("今日用户增长情况")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("新增人数(微信)")]),t._v(" "),a("p",{staticClass:"num"},[t._v("12")])]),t._v(" "),a("li",[a("p",[t._v("新增人数(注册)")]),t._v(" "),a("p",{staticClass:"num"},[t._v("32")])]),t._v(" "),a("li",[a("p",[t._v("总用户数")]),t._v(" "),a("p",{staticClass:"num"},[t._v("3896")])])])]),t._v(" "),a("section",{staticClass:"user-love"},[a("p",[t._v("用户喜好情况")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("美妆")]),t._v(" "),a("p",{staticClass:"num"},[t._v("29.1%")])]),t._v(" "),a("li",[a("p",[t._v("美食")]),t._v(" "),a("p",{staticClass:"num"},[t._v("29.1%")])]),t._v(" "),a("li",[a("p",[t._v("服饰")]),t._v(" "),a("p",{staticClass:"num"},[t._v("29.1%")])]),t._v(" "),a("li",[a("p",[t._v("健身")]),t._v(" "),a("p",{staticClass:"num"},[t._v("29.1%")])]),t._v(" "),a("li",[a("p",[t._v("家居")]),t._v(" "),a("p",{staticClass:"num"},[t._v("29.1%")])])])])])}]};var M=a("Z0/y")({data:function(){return{transitionName:"out-in"}},watch:{$route:function(t,e){this.transitionName=t.name<e.name?"slide-right":"slide-left"}}},P,!1,function(t){a("FNEL")},"data-v-26c75a9b",null).exports;n.a.use(v.a);var O=new v.a({mode:"history",base:"/admin",routes:[{path:"/",component:M},{path:"/manage",component:h,children:[{path:"",component:D,name:"1"},{path:"article",component:D,name:"1"},{path:"article/add",component:q,name:"2"},{path:"user",component:C,name:"3"}]},{path:"/statistics",component:f,children:[{path:"",component:Z},{path:"user",component:Z}]}]});n.a.config.productionTip=!1,new n.a({el:"#app",router:O,components:{App:m},template:"<App/>"})},TxWz:function(t,e){},WfUD:function(t,e){},hquO:function(t,e){},n5pn:function(t,e){},uMbG:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.d4d421a75943eb1f0771.js.map